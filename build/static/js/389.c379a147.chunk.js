/*! For license information please see 389.c379a147.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunknutrea_genie=self.webpackChunknutrea_genie||[]).push([[389],{3488:(e,s,a)=>{a.d(s,{A:()=>r});const r=" https://3-104-203-150.nip.io"},4389:(e,s,a)=>{a.r(s),a.d(s,{default:()=>D,refreshToken:()=>B,verifyToken:()=>z});var r=a(9379),n=a(5043),o=a(9722),i=a(2134),t=a(9258),c=a(7808),l=a(9732),d=a(3216),m=a(8729),h=a(3488);const p="Login_container__-h4N5",_="Login_formContainer__eWHMJ",u="Login_headerSection__P6udn",g="Login_title__j9SaB",w="Login_subtitle__f4P9l",v="Login_form__5n2LA",x="Login_inputGroup__BQXkc",k="Login_label__1UlG-",y="Login_inputWrapper__DKlPc",j="Login_inputIcon__uZHXh",f="Login_input__4w1AH",N="Login_inputError__ghr40",b="Login_errorText__1YPw1",L="Login_passwordToggle__kzo8p",A="Login_passwordToggleIcon__2tSSR",S="Login_optionsGroup__DMdp2",T="Login_rememberMe__WfMTF",P="Login_checkbox__gY4zw",M="Login_forgotPassword__aI5dX",E="Login_submitButton__JP6I9",I="Login_submitError__1sN8M",C="Login_signupPrompt__6BtsW",F="Login_signupLink__kqy0K";var W=a(579);const z=async e=>{try{return(await o.A.post("".concat(h.A,"/api/v1/auth/token/verify/"),{token:e})).data}catch(r){var s,a;throw new Error((null===(s=r.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Token verification failed.")}},B=async e=>{try{return(await o.A.post("".concat(h.A,"/api/v1/auth/token/refresh/"),{refresh:e})).data}catch(r){var s,a;throw new Error((null===(s=r.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Token refresh failed.")}},D=()=>{const[e,s]=(0,n.useState)({email:"",password:""}),[a,D]=(0,n.useState)({}),[q,G]=(0,n.useState)(!1),[H,X]=(0,n.useState)(!1),J=(0,d.Zp)(),{login:K}=(0,m.A)(),O=e=>{const{name:n,value:o}=e.target;s((e=>(0,r.A)((0,r.A)({},e),{},{[n]:o}))),a[n]&&D((e=>(0,r.A)((0,r.A)({},e),{},{[n]:""})))};return(0,W.jsx)("div",{className:p,children:(0,W.jsxs)("div",{className:_,children:[(0,W.jsxs)("div",{className:u,children:[(0,W.jsx)("h1",{className:g,children:"Welcome"}),(0,W.jsx)("p",{className:w,children:"Please enter your details to sign in"})]}),(0,W.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),(()=>{const s={};return e.email?/\S+@\S+\.\S+/.test(e.email)||(s.email="Please enter a valid email address"):s.email="Email is required",e.password?e.password.length<5&&(s.password="Password must be at least 5 characters"):s.password="Password is required",D(s),0===Object.keys(s).length})()){X(!0);try{const s=await o.A.post("".concat(h.A,"/api/v1/auth/login/"),{email:e.email,password:e.password}),{access:a,refresh:r}=s.data;localStorage.setItem("accessToken",a),localStorage.setItem("refreshToken",r),K({token:a,refreshToken:r,email:e.email});try{await z(a)}catch(n){console.error("Token verification error:",n)}try{const e=await B(r);e.access&&localStorage.setItem("accessToken",e.access)}catch(i){console.error("Token refresh error:",i)}J("/dashboard")}catch(t){var a,r;D({submit:(null===(a=t.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||"username/password is incorrect"})}finally{X(!1)}}},className:v,children:[(0,W.jsxs)("div",{className:x,children:[(0,W.jsx)("label",{className:k,htmlFor:"email",children:"Email"}),(0,W.jsxs)("div",{className:y,children:[(0,W.jsx)(i.A,{className:j}),(0,W.jsx)("input",{id:"email",type:"email",name:"email",value:e.email,onChange:O,placeholder:"Enter your email",className:"".concat(f," ").concat(a.email?N:""),disabled:H})]}),a.email&&(0,W.jsx)("span",{className:b,children:a.email})]}),(0,W.jsxs)("div",{className:x,children:[(0,W.jsx)("label",{className:k,htmlFor:"password",children:"Password"}),(0,W.jsxs)("div",{className:y,children:[(0,W.jsx)(t.A,{className:j}),(0,W.jsx)("input",{id:"password",type:q?"text":"password",name:"password",value:e.password,onChange:O,placeholder:"Enter your password",className:"".concat(f," ").concat(a.password?N:""),disabled:H}),(0,W.jsx)("button",{type:"button",className:L,onClick:()=>G(!q),children:q?(0,W.jsx)(c.A,{className:A}):(0,W.jsx)(l.A,{className:A})})]}),a.password&&(0,W.jsx)("span",{className:b,children:a.password})]}),(0,W.jsxs)("div",{className:S,children:[(0,W.jsxs)("div",{className:T,children:[(0,W.jsx)("input",{type:"checkbox",id:"remember",className:P}),(0,W.jsx)("label",{htmlFor:"remember",children:"Remember me"})]}),(0,W.jsx)("a",{href:"#",className:M,children:"Forgot password?"})]}),a.submit&&(0,W.jsx)("div",{className:I,children:a.submit}),(0,W.jsx)("button",{type:"submit",className:E,disabled:H,children:H?"Signing in...":"Sign in"}),(0,W.jsxs)("p",{className:C,children:["Don't have an account?"," ",(0,W.jsx)("a",{href:"/input",className:F,children:"Sign up"})]})]})]})})}},7808:(e,s,a)=>{a.d(s,{A:()=>r});const r=(0,a(1114).A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},9732:(e,s,a)=>{a.d(s,{A:()=>r});const r=(0,a(1114).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9258:(e,s,a)=>{a.d(s,{A:()=>r});const r=(0,a(1114).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},2134:(e,s,a)=>{a.d(s,{A:()=>r});const r=(0,a(1114).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])}}]);
//# sourceMappingURL=389.c379a147.chunk.js.map